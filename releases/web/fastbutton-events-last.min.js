Package("tupai.util").use("tupai.util.UserAgent").define("FastButton",function(e){var g=[];function c(){g.splice(0,2)}function b(k){for(var j=0;j<g.length;j+=2){var h=g[j];var l=g[j+1];if(Math.abs(k.clientX-h)<25&&Math.abs(k.clientY-l)<25){k.stopPropagation();k.preventDefault()}}}function d(h,i){g.push(h,i);window.setTimeout(c,2500)}var a=false;function f(){if(a){return}if(window.__tupai&&__tupai.enableClickBuster){if(e.UserAgent.android()){document.addEventListener("click",b,true)}}a=true}return Package.Class.extend({initialize:function(h,i){f();this.element=h;this.handler=i;if(e.UserAgent.android()){h.addEventListener("touchstart",this,false);if(window.__tupai&&__tupai.enableClickBuster){h.addEventListener("click",this,false)}}else{h.addEventListener("click",this,false)}},handleEvent:function(h){switch(h.type){case"touchstart":this.onTouchStart(h);break;case"touchmove":this.onTouchMove(h);break;case"touchend":this.onClick(h);break;case"click":this.onClick(h);break}},onTouchStart:function(h){h.stopPropagation();this.element.addEventListener("touchend",this,false);document.body.addEventListener("touchmove",this,false);this.startX=h.touches[0].clientX;this.startY=h.touches[0].clientY},onTouchMove:function(h){if(Math.abs(h.touches[0].clientX-this.startX)>=25||Math.abs(h.touches[0].clientY-this.startY)>10){this.reset()}},onClick:function(h){h.stopPropagation();this.reset();this.handler(h);if(window.__tupai&&__tupai.enableClickBuster){if(h.type=="touchend"){d(this.startX,this.startY)}}},reset:function(){this.element.removeEventListener("touchend",this,false);document.body.removeEventListener("touchmove",this,false)},clear:function(){this.reset();this.element.removeEventListener("touchstart",this,false);this.element.removeEventListener("click",this,false)}})}).define(function(a){return{bind:function(b,c){if(!b){return}if(b._element){if(b._element){return a.FastButton.bind(b._element,c)}}else{if(!window.addEventListener){b.attachEvent("onclick",c);b.fastbutton=c}else{b.fastbutton=new a.FastButton(b,c)}}},childBind:function(){if(a.UserAgent.android()){var e=arguments[0];var b=arguments[1];a.FastButton.bind(e,b)}else{for(var d=2,g=arguments.length;d<g;d+=2){var f=arguments[d];var c=arguments[d+1];a.FastButton.bind(f,c)}}},unbind:function(b){if(!b){return}if(b._element){return a.FastButton.unbind(b._element)}else{var c=b.fastbutton;if(!c){return}if(c.clear){c.clear()}else{b.detachEvent("onclick",c)}b.fastbutton=undefined}}}});Package("tupai.ui").use("tupai.util.FastButton").use("tupai.ui.ViewEvents").use("tupai.util.HashUtil").define("FastButtonViewEvents",function(c){var d=function(g,f,h,e){if(f==="click"){c.FastButton.bind(g,h)}else{return b.bind.apply(undefined,arguments)}};var a=function(f,e,g){if(e==="click"){c.FastButton.unbind(f)}else{return b.unbind.apply(undefined,arguments)}};var b=c.HashUtil.swap(c.ViewEvents,{bind:d,unbind:a})});Package("tupai.util").use("tupai.util.UserAgent").define("FastButton",function(e){var g=[];function c(){g.splice(0,2)}function b(k){for(var j=0;j<g.length;j+=2){var h=g[j];var l=g[j+1];if(Math.abs(k.clientX-h)<25&&Math.abs(k.clientY-l)<25){k.stopPropagation();k.preventDefault()}}}function d(h,i){g.push(h,i);window.setTimeout(c,2500)}var a=false;function f(){if(a){return}if(window.__tupai&&__tupai.enableClickBuster){if(e.UserAgent.android()){document.addEventListener("click",b,true)}}a=true}return Package.Class.extend({initialize:function(h,i){f();this.element=h;this.handler=i;if(e.UserAgent.android()){h.addEventListener("touchstart",this,false);if(window.__tupai&&__tupai.enableClickBuster){h.addEventListener("click",this,false)}}else{h.addEventListener("click",this,false)}},handleEvent:function(h){switch(h.type){case"touchstart":this.onTouchStart(h);break;case"touchmove":this.onTouchMove(h);break;case"touchend":this.onClick(h);break;case"click":this.onClick(h);break}},onTouchStart:function(h){h.stopPropagation();this.element.addEventListener("touchend",this,false);document.body.addEventListener("touchmove",this,false);this.startX=h.touches[0].clientX;this.startY=h.touches[0].clientY},onTouchMove:function(h){if(Math.abs(h.touches[0].clientX-this.startX)>=25||Math.abs(h.touches[0].clientY-this.startY)>10){this.reset()}},onClick:function(h){h.stopPropagation();this.reset();this.handler(h);if(window.__tupai&&__tupai.enableClickBuster){if(h.type=="touchend"){d(this.startX,this.startY)}}},reset:function(){this.element.removeEventListener("touchend",this,false);document.body.removeEventListener("touchmove",this,false)},clear:function(){this.reset();this.element.removeEventListener("touchstart",this,false);this.element.removeEventListener("click",this,false)}})}).define(function(a){return{bind:function(b,c){if(!b){return}if(b._element){if(b._element){return a.FastButton.bind(b._element,c)}}else{if(!window.addEventListener){b.attachEvent("onclick",c);b.fastbutton=c}else{b.fastbutton=new a.FastButton(b,c)}}},childBind:function(){if(a.UserAgent.android()){var e=arguments[0];var b=arguments[1];a.FastButton.bind(e,b)}else{for(var d=2,g=arguments.length;d<g;d+=2){var f=arguments[d];var c=arguments[d+1];a.FastButton.bind(f,c)}}},unbind:function(b){if(!b){return}if(b._element){return a.FastButton.unbind(b._element)}else{var c=b.fastbutton;if(!c){return}if(c.clear){c.clear()}else{b.detachEvent("onclick",c)}b.fastbutton=undefined}}}});Package("tupai.ui").use("tupai.util.FastButton").use("tupai.ui.ViewEvents").use("tupai.util.HashUtil").define("FastButtonViewEvents",function(c){var d=function(g,f,h,e){if(f==="click"){c.FastButton.bind(g,h)}else{return b.bind.apply(undefined,arguments)}};var a=function(f,e,g){if(e==="click"){c.FastButton.unbind(f)}else{return b.unbind.apply(undefined,arguments)}};var b=c.HashUtil.swap(c.ViewEvents,{bind:d,unbind:a})});Package("tupai.util").use("tupai.util.UserAgent").define("FastButton",function(e){var g=[];function c(){g.splice(0,2)}function b(k){for(var j=0;j<g.length;j+=2){var h=g[j];var l=g[j+1];if(Math.abs(k.clientX-h)<25&&Math.abs(k.clientY-l)<25){k.stopPropagation();k.preventDefault()}}}function d(h,i){g.push(h,i);window.setTimeout(c,2500)}var a=false;function f(){if(a){return}if(window.__tupai&&__tupai.enableClickBuster){if(e.UserAgent.android()){document.addEventListener("click",b,true)}}a=true}return Package.Class.extend({initialize:function(h,i){f();this.element=h;this.handler=i;if(e.UserAgent.android()){h.addEventListener("touchstart",this,false);if(window.__tupai&&__tupai.enableClickBuster){h.addEventListener("click",this,false)}}else{h.addEventListener("click",this,false)}},handleEvent:function(h){switch(h.type){case"touchstart":this.onTouchStart(h);break;case"touchmove":this.onTouchMove(h);break;case"touchend":this.onClick(h);break;case"click":this.onClick(h);break}},onTouchStart:function(h){h.stopPropagation();this.element.addEventListener("touchend",this,false);document.body.addEventListener("touchmove",this,false);this.startX=h.touches[0].clientX;this.startY=h.touches[0].clientY},onTouchMove:function(h){if(Math.abs(h.touches[0].clientX-this.startX)>=25||Math.abs(h.touches[0].clientY-this.startY)>10){this.reset()}},onClick:function(h){h.stopPropagation();this.reset();this.handler(h);if(window.__tupai&&__tupai.enableClickBuster){if(h.type=="touchend"){d(this.startX,this.startY)}}},reset:function(){this.element.removeEventListener("touchend",this,false);document.body.removeEventListener("touchmove",this,false)},clear:function(){this.reset();this.element.removeEventListener("touchstart",this,false);this.element.removeEventListener("click",this,false)}})}).define(function(a){return{bind:function(b,c){if(!b){return}if(b._element){if(b._element){return a.FastButton.bind(b._element,c)}}else{if(!window.addEventListener){b.attachEvent("onclick",c);b.fastbutton=c}else{b.fastbutton=new a.FastButton(b,c)}}},childBind:function(){if(a.UserAgent.android()){var e=arguments[0];var b=arguments[1];a.FastButton.bind(e,b)}else{for(var d=2,g=arguments.length;d<g;d+=2){var f=arguments[d];var c=arguments[d+1];a.FastButton.bind(f,c)}}},unbind:function(b){if(!b){return}if(b._element){return a.FastButton.unbind(b._element)}else{var c=b.fastbutton;if(!c){return}if(c.clear){c.clear()}else{b.detachEvent("onclick",c)}b.fastbutton=undefined}}}});Package("tupai.ui").use("tupai.util.FastButton").use("tupai.ui.ViewEvents").use("tupai.util.HashUtil").define("FastButtonViewEvents",function(c){var d=function(g,f,h,e){if(f==="click"){c.FastButton.bind(g,h)}else{return b.bind.apply(undefined,arguments)}};var a=function(f,e,g){if(e==="click"){c.FastButton.unbind(f)}else{return b.unbind.apply(undefined,arguments)}};var b=c.HashUtil.swap(c.ViewEvents,{bind:d,unbind:a})});